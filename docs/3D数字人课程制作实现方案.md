# 3Dæ•°å­—äººè¯¾ç¨‹åˆ¶ä½œåŠŸèƒ½å®ç°æ–¹æ¡ˆ

## ä¸€ã€é¡¹ç›®èƒŒæ™¯

### 1.1 éœ€æ±‚æ¦‚è¿°
åç«¯å·²æ–°å¢3Dæ•°å­—äººè§†é¢‘åˆæˆèƒ½åŠ›ï¼ˆé­”çæ˜Ÿäº‘å¹³å°ï¼‰ï¼Œéœ€è¦åœ¨å‰ç«¯æ–°å¢3Dæ•°å­—äººè¯¾ç¨‹åˆ¶ä½œé¡µé¢ã€‚è¯¥é¡µé¢å¤ç”¨åŸæœ‰çš„ `megerMedia` å’Œ `reMegerMedia` æ¥å£ï¼Œé€šè¿‡ `platformType` å‚æ•°åŒºåˆ†2Då’Œ3Då¹³å°ã€‚

### 1.2 æ¥å£å˜åŒ–
åŸºäºåç«¯APIæ–‡æ¡£åˆ†æï¼Œè§†é¢‘åˆæˆæ¥å£æ–°å¢ä»¥ä¸‹å‚æ•°ï¼š

**å¤ç”¨æ¥å£ï¼š**
- `POST /admin-api/digitalcourse/course-media/megerMedia` - åˆæˆè§†é¢‘
- `POST /admin-api/digitalcourse/course-media/reMegerMedia` - é‡æ–°ç”Ÿæˆ

**æ–°å¢å‚æ•°ï¼ˆCourseMediaMegerVOï¼‰ï¼š**
```typescript
{
  // å¹³å°ç±»å‹åŒºåˆ†
  platformType?: number          // 1-2Dï¼ˆeasegenï¼‰ï¼Œ2-3Dï¼ˆé­”çæ˜Ÿäº‘ï¼‰

  // 3Dæ•°å­—äººä¸“å±å‚æ•°
  lookName?: string             // æ•°å­—äººå½¢è±¡åç§°ï¼ˆ3Dä½¿ç”¨ï¼‰
  ttsVcnName?: string           // éŸ³è‰²åç§°ï¼ˆ3Dä½¿ç”¨ï¼‰
  studioName?: string           // æ¼”æ’­å®¤åç§°ï¼ˆ3Dä½¿ç”¨ï¼‰
  subTitle?: string             // å­—å¹•å¼€å…³ï¼šon/offï¼ˆ3Dä½¿ç”¨ï¼‰
  ifAigcMark?: number           // æ˜¯å¦æ˜¾ç¤ºAIç”Ÿæˆæ ‡è¯†ï¼š0-å¦ï¼Œ1-æ˜¯ï¼ˆ3Dä½¿ç”¨ï¼‰

  // åˆæˆæ–¹å¼
  synthesisType?: string        // segment-æ–‡æœ¬ç‰‡æ®µï¼Œppt-PPTæ–‡ä»¶
  pptFileUrl?: string           // PPTæ–‡ä»¶URLï¼ˆpptæ–¹å¼ï¼‰
  text?: string                 // æ–‡æœ¬å†…å®¹ï¼ˆsegmentæ–¹å¼ï¼‰
  reqJson?: string              // è¯·æ±‚JSONï¼ˆé¢å¤–å‚æ•°ï¼‰
}
```

### 1.3 3Dèµ„æºæ•°æ®
åŸºç¡€èµ„æ–™ä½äº `docs/` ç›®å½•ï¼š
- **3déŸ³è‰²ä¿¡æ¯.json** - 40ä¸ªéŸ³è‰²é€‰é¡¹ï¼ˆä¸­è‹±æ–‡ã€ä¸åŒé£æ ¼ï¼‰
- **3däººç‰©ä¿¡æ¯.json** - 26ä¸ªæ•°å­—äººå½¢è±¡ï¼ˆç”·å¥³ã€ä¸åŒå¹´é¾„/é£æ ¼ï¼‰
- **3dåœºæ™¯ä¿¡æ¯.json** - 39ä¸ªæ¼”æ’­å®¤åœºæ™¯ï¼ˆä¸åŒé£æ ¼/ç”¨é€”ï¼‰

---

## äºŒã€2Dè¯¾ç¨‹åˆ¶ä½œé¡µé¢åˆ†æ

### 2.1 ç°æœ‰æ¶æ„
**æ–‡ä»¶ä½ç½®ï¼š** `src/views/chooseTemplate/index.vue`

**é¡µé¢ç»“æ„ï¼š**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Header: è¿”å› | è¯¾ç¨‹å | é¢„è®¡æ—¶é•¿ | å­—æ•° | ä¿å­˜ | åˆæˆè§†é¢‘  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚          â”‚                          â”‚                  â”‚
â”‚  å·¦ä¾§    â”‚     ä¸­é—´ç”»å¸ƒç¼–è¾‘åŒº        â”‚    å³ä¾§å·¥å…·æ      â”‚
â”‚  PPT     â”‚                          â”‚                  â”‚
â”‚  ç¼©ç•¥å›¾   â”‚  - èƒŒæ™¯å›¾                â”‚  - æ¨¡æ¿è®¾ç½®      â”‚
â”‚  åˆ—è¡¨    â”‚  - ç”»ä¸­ç”»ï¼ˆå¯é€‰ï¼‰         â”‚  - æ•°å­—äººé€‰æ‹©    â”‚
â”‚          â”‚  - æ•°å­—äººï¼ˆå¯æ‹–æ‹½è°ƒæ•´ï¼‰    â”‚  - èƒŒæ™¯é€‰æ‹©      â”‚
â”‚          â”‚                          â”‚  - ç”»ä¸­ç”»è®¾ç½®    â”‚
â”‚          â”‚                          â”‚                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.2 æ ¸å¿ƒæ•°æ®æµ

**1. åˆå§‹åŒ–æµç¨‹ï¼š**
```
ç”¨æˆ·è¿›å…¥ â†’ åˆ›å»ºè¯¾ç¨‹ID (coursesCreate) â†’ åˆå§‹åŒ–courseInfo
```

**2. PPTä¸Šä¼ æµç¨‹ï¼š**
```
ä¸Šä¼ PPT â†’ åç«¯æ–‡ä»¶å­˜å‚¨ â†’ åˆ›å»ºPPTè®°å½• (createPPT)
       â†’ åç«¯è§£æï¼ˆè½®è¯¢ getScheduleï¼‰ â†’ ç”Ÿæˆåœºæ™¯åˆ—è¡¨
```

**3. åœºæ™¯ç¼–è¾‘æµç¨‹ï¼š**
```
é€‰æ‹©åœºæ™¯ â†’ é…ç½®æ¨¡æ¿ â†’ é€‰æ‹©æ•°å­—äºº â†’ ç¼–è¾‘å£æ’­ç¨¿
        â†’ é€‰æ‹©éŸ³è‰² â†’ è°ƒæ•´è¯­é€ŸéŸ³é‡ â†’ ä¿å­˜åœºæ™¯æ•°æ®
```

**4. åˆæˆè§†é¢‘æµç¨‹ï¼š**
```
ç‚¹å‡»åˆæˆ â†’ æ ¡éªŒæ•°æ® â†’ ä¿å­˜è¯¾ç¨‹ (coursesSave)
        â†’ è°ƒç”¨åˆæˆæ¥å£ (megerMedia) â†’ æç¤ºç”¨æˆ·æŸ¥çœ‹"æˆ‘çš„è§†é¢‘"
```

### 2.3 å…³é”®æ•°æ®ç»“æ„

**è¯¾ç¨‹åŸºç¡€ä¿¡æ¯ï¼š**
```typescript
const courseInfo = {
  id: number,
  accountId: number,
  aspect: string,        // '16:9' æˆ– '9:16'
  name: string,
  duration: number,
  status: number,
  pageMode: number,      // 2-pptè¯¾ä»¶è§†é¢‘
  matting: number,       // 1-æŠ å›¾
  width: number,         // 1920
  height: number         // 1080
}
```

**åœºæ™¯æ•°æ®ï¼ˆPPTArrï¼‰ï¼š**
```typescript
{
  pictureUrl: string,           // èƒŒæ™¯å›¾URL
  pptRemark: string,            // å£æ’­ç¨¿
  driverType: number,           // 1-æ–‡æœ¬é©±åŠ¨ 2-éŸ³é¢‘é©±åŠ¨
  showDigitalHuman: boolean,    // æ˜¯å¦æ˜¾ç¤ºæ•°å­—äºº
  innerPicture: {               // ç”»ä¸­ç”»ï¼ˆå¯é€‰ï¼‰
    src: string,
    width: number,
    height: number,
    top: number,
    marginLeft: number
  },
  // ... å…¶ä»–é…ç½®
}
```

### 2.4 APIè°ƒç”¨æ—¶æœº

| API | æ—¶æœº | ç”¨é€” |
|-----|------|------|
| `coursesCreate` | é¡µé¢åˆå§‹åŒ– | åˆ›å»ºè¯¾ç¨‹è®°å½• |
| `createPPT` | PPTä¸Šä¼ æˆåŠŸå | ä¿å­˜PPTä¿¡æ¯å¹¶è§¦å‘è§£æ |
| `getSchedule` | PPTä¸Šä¼ åè½®è¯¢ | è·å–è§£æè¿›åº¦ |
| `pageList` | æ‰“å¼€æ•°å­—äººé€‰æ‹©é¢æ¿ | è·å–æ•°å­—äººåˆ—è¡¨ |
| `videlPageList` | æ‰“å¼€éŸ³è‰²é€‰æ‹©é¢æ¿ | è·å–éŸ³è‰²åˆ—è¡¨ |
| `coursesSave` | ç‚¹å‡»ä¿å­˜æŒ‰é’® | ä¿å­˜è¯¾ç¨‹æ‰€æœ‰æ•°æ® |
| `megerMedia` | ç‚¹å‡»åˆæˆè§†é¢‘ | æäº¤è§†é¢‘åˆæˆä»»åŠ¡ |

---

## ä¸‰ã€3Dæ•°å­—äººé¡µé¢å®ç°æ–¹æ¡ˆ

### 3.1 æ•´ä½“è®¾è®¡æ€è·¯

**æ ¸å¿ƒåŸåˆ™ï¼š**
1. å‚è€ƒ2Dé¡µé¢çš„äº¤äº’æµç¨‹ï¼Œä¿æŒç”¨æˆ·ä½“éªŒä¸€è‡´æ€§
2. ç®€åŒ–ä¸å¿…è¦çš„åŠŸèƒ½ï¼ˆå»é™¤ç”»ä¸­ç”»ã€æ¨¡æ¿é€‰æ‹©ï¼‰
3. æ–°å¢3Dç‰¹æœ‰çš„é…ç½®é¡¹ï¼ˆæ¼”æ’­å®¤åœºæ™¯é€‰æ‹©ï¼‰
4. å›ºå®šéƒ¨åˆ†å‚æ•°ä»¥ç®€åŒ–ç”¨æˆ·æ“ä½œ

**ç®€åŒ–ç­–ç•¥ï¼š**
- âŒ **å»é™¤åŠŸèƒ½**ï¼šç”»ä¸­ç”»ã€è‡ªå®šä¹‰æ¨¡æ¿ã€æ•°å­—äººä½ç½®è°ƒæ•´
- âœ… **ä¿ç•™åŠŸèƒ½**ï¼šPPTä¸Šä¼ è§£æã€å£æ’­ç¨¿ç¼–è¾‘ã€æ•°å­—äººé€‰æ‹©ã€éŸ³è‰²é€‰æ‹©
- â• **æ–°å¢åŠŸèƒ½**ï¼šæ¼”æ’­å®¤åœºæ™¯é€‰æ‹©
- ğŸ”’ **å›ºå®šå‚æ•°**ï¼š
  - `platformType = 2` (3D)
  - `synthesisType = 'segment'` (æ–‡æœ¬ç‰‡æ®µæ–¹å¼)
  - `ifAigcMark = 0` (ä¸æ˜¾ç¤ºAIæ ‡è¯†)
  - `subTitle = 'off'` (å­—å¹•å…³é—­ï¼Œå¯é€‰å¼€å¯)

### 3.2 é¡µé¢å¸ƒå±€è®¾è®¡

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Header: è¿”å› | 3Dè¯¾ç¨‹å | é¢„è®¡æ—¶é•¿ | å­—æ•° | ä¿å­˜ | åˆæˆè§†é¢‘ â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚          â”‚                          â”‚                  â”‚
â”‚  å·¦ä¾§    â”‚     ä¸­é—´é¢„è§ˆåŒº            â”‚    å³ä¾§é…ç½®æ      â”‚
â”‚  PPT     â”‚                          â”‚                  â”‚
â”‚  é¡µé¢    â”‚  æ˜¾ç¤ºå½“å‰é€‰ä¸­é¡µé¢çš„PPT     â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  åˆ—è¡¨    â”‚  ï¼ˆåªè¯»å±•ç¤ºï¼Œä¸å¯ç¼–è¾‘ï¼‰    â”‚  â”‚ æ¼”æ’­å®¤åœºæ™¯   â”‚ â”‚
â”‚          â”‚                          â”‚  â”‚ é€‰æ‹©        â”‚ â”‚
â”‚  å¯æ‹–æ‹½   â”‚  + æ–‡æ¡ˆé¢„è§ˆåŒºåŸŸ           â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚  æ’åº    â”‚                          â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚          â”‚                          â”‚  â”‚ æ•°å­—äººå½¢è±¡   â”‚ â”‚
â”‚  å¤åˆ¶/   â”‚                          â”‚  â”‚ é€‰æ‹©        â”‚ â”‚
â”‚  åˆ é™¤    â”‚                          â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚          â”‚                          â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚          â”‚                          â”‚  â”‚ éŸ³è‰²é€‰æ‹©     â”‚ â”‚
â”‚          â”‚                          â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚          â”‚                          â”‚                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.3 ç›®å½•ç»“æ„è§„åˆ’

```
src/views/
â””â”€â”€ choose3DTemplate/              # æ–°å»º3Dè¯¾ç¨‹åˆ¶ä½œç›®å½•
    â”œâ”€â”€ index.vue                  # ä¸»é¡µé¢
    â”œâ”€â”€ components/                # ç»„ä»¶ç›®å½•
    â”‚   â”œâ”€â”€ StudioSelector.vue     # æ¼”æ’­å®¤åœºæ™¯é€‰æ‹©å™¨
    â”‚   â”œâ”€â”€ LookSelector.vue       # 3Dæ•°å­—äººå½¢è±¡é€‰æ‹©å™¨
    â”‚   â”œâ”€â”€ VoiceSelector.vue      # 3DéŸ³è‰²é€‰æ‹©å™¨
    â”‚   â”œâ”€â”€ ScriptEditor.vue       # å£æ’­ç¨¿ç¼–è¾‘å™¨ï¼ˆå¤ç”¨æˆ–æ–°å»ºï¼‰
    â”‚   â””â”€â”€ PPTList.vue            # PPTé¡µé¢åˆ—è¡¨ï¼ˆå¯é€‰ï¼Œå¤ç”¨é€»è¾‘ï¼‰
    â””â”€â”€ types.ts                   # TypeScriptç±»å‹å®šä¹‰
```

### 3.4 æ–°å¢APIå®šä¹‰

**æ–‡ä»¶ä½ç½®ï¼š** `src/api/pptTemplate/index.ts`

```typescript
// 3Dæ•°å­—äººè§†é¢‘åˆæˆè¯·æ±‚å‚æ•°
export interface CourseMedia3DMegerVO {
  // å¿…å¡«é¡¹
  id: number                      // è¯¾ç¨‹ID
  courseMediaId: number           // è§†é¢‘ID
  name: string                    // è¯¾ç¨‹åç§°

  // åŸºç¡€é…ç½®
  accountId?: number
  aspect?: string                 // å±å¹•æ¯”ä¾‹
  duration?: number               // æ—¶é•¿ï¼ˆç§’ï¼‰
  height?: number                 // é«˜åº¦ï¼ˆåƒç´ ï¼‰
  width?: number                  // å®½åº¦ï¼ˆåƒç´ ï¼‰
  matting?: number                // æ˜¯å¦æŠ å›¾æ ‡è¯†
  pageMode?: number               // é¡µé¢æ¨¡å¼
  status?: number
  pageInfo?: string
  thumbnail?: string
  subtitlesStyle?: string

  // åœºæ™¯æ•°æ®
  scenes?: any[]                  // åœºæ™¯åˆ—è¡¨
  ppt?: any[]
  expectedDuration?: number       // å‰ç«¯ä¼ çš„é¢„ä¼°æ—¶é—´ ç§’

  // 3Då¹³å°å›ºå®šå‚æ•°
  platformType: 2                 // å›ºå®šä¸º2ï¼ˆé­”çæ˜Ÿäº‘ï¼‰
  synthesisType: 'segment'        // å›ºå®šä¸ºsegment
  ifAigcMark: 0                   // å›ºå®šä¸º0ï¼ˆä¸æ˜¾ç¤ºAIæ ‡è¯†ï¼‰

  // 3Dæ•°å­—äººé…ç½®ï¼ˆç”¨æˆ·é€‰æ‹©ï¼‰
  lookName: string                // æ•°å­—äººå½¢è±¡åç§°ï¼ˆå¿…å¡«ï¼‰
  ttsVcnName: string              // éŸ³è‰²åç§°ï¼ˆå¿…å¡«ï¼‰
  studioName: string              // æ¼”æ’­å®¤åç§°ï¼ˆå¿…å¡«ï¼‰
  subTitle?: string               // å­—å¹•å¼€å…³ï¼šon/offï¼ˆå¯é€‰ï¼Œé»˜è®¤offï¼‰

  // æ–‡æœ¬å†…å®¹
  text?: string                   // æ‰€æœ‰åœºæ™¯çš„å£æ’­ç¨¿æ–‡æœ¬ï¼ˆæ‹¼æ¥ï¼‰
  reqJson?: string                // é¢å¤–å‚æ•°
}

// æ–°å¢APIæ–¹æ³•ï¼ˆå¦‚éœ€è¦ç‹¬ç«‹çš„3Dæ¥å£ï¼‰
export const megerMedia3D = async(data: CourseMedia3DMegerVO) => {
  return await request.post({ url: '/digitalcourse/course-media/megerMedia', data })
}
```

### 3.5 æ ¸å¿ƒç»„ä»¶è®¾è®¡

#### 3.5.1 æ¼”æ’­å®¤åœºæ™¯é€‰æ‹©å™¨ (StudioSelector.vue)

**æ•°æ®æ¥æºï¼š** `docs/3dåœºæ™¯ä¿¡æ¯.json`

**UIè®¾è®¡ï¼š**
```vue
<template>
  <div class="studio-selector">
    <h3>é€‰æ‹©æ¼”æ’­å®¤åœºæ™¯</h3>

    <!-- ç­›é€‰æ  -->
    <div class="filter-bar">
      <el-select v-model="filterStyle" placeholder="åœºæ™¯é£æ ¼">
        <el-option label="å…¨éƒ¨" value="" />
        <el-option label="ç°ä»£ç®€çº¦" value="modern,simple" />
        <el-option label="å•†åŠ¡æ­£å¼" value="business" />
        <el-option label="ç”Ÿæ´»æ—¥å¸¸" value="daily_living" />
        <!-- ... æ›´å¤šé€‰é¡¹ -->
      </el-select>

      <el-select v-model="filterType" placeholder="ç±»å‹">
        <el-option label="å…¨éƒ¨" value="" />
        <el-option label="å¤§èˆå°" value="lstage" />
        <el-option label="å°èˆå°" value="sstage" />
        <el-option label="ç‰¹å†™ç«™å§¿" value="closeshot" />
        <!-- ... -->
      </el-select>
    </div>

    <!-- åœºæ™¯å¡ç‰‡ç½‘æ ¼ -->
    <div class="studio-grid">
      <div
        v-for="studio in filteredStudios"
        :key="studio.id"
        :class="['studio-card', { active: selectedStudio?.id === studio.id }]"
        @click="selectStudio(studio)"
      >
        <el-image :src="studio.render_image_oss" fit="cover" />
        <div class="studio-info">
          <div class="studio-name">{{ studio.studio_chinese_name }}</div>
          <div class="studio-tags">
            <el-tag size="small">{{ getCameraType(studio.camera_config_chinese_name) }}</el-tag>
            <el-tag size="small" type="info">{{ getStudioType(studio.terminal_studio_type) }}</el-tag>
          </div>
        </div>
        <!-- é¢„è§ˆè§†é¢‘ -->
        <el-icon v-if="studio.render_movie_oss" class="play-icon">
          <VideoPlay />
        </el-icon>
      </div>
    </div>

    <!-- é¢„è§ˆå¼¹çª— -->
    <el-dialog v-model="previewVisible" title="åœºæ™¯é¢„è§ˆ">
      <video :src="previewStudio?.render_movie_oss" controls autoplay />
    </el-dialog>
  </div>
</template>

<script setup lang="ts">
import { ref, computed } from 'vue'
import studioData from '@/assets/data/3dåœºæ™¯ä¿¡æ¯.json'

interface Studio {
  id: number
  studio_en_name: string
  studio_chinese_name: string
  render_image_oss: string
  render_movie_oss: string
  terminal_studio_style: string
  terminal_studio_type: string
  camera_config_chinese_name: string
  // ... å…¶ä»–å­—æ®µ
}

const selectedStudio = ref<Studio | null>(null)
const filterStyle = ref('')
const filterType = ref('')
const previewVisible = ref(false)
const previewStudio = ref<Studio | null>(null)

const studios = ref<Studio[]>(studioData.data.results)

const filteredStudios = computed(() => {
  return studios.value.filter(studio => {
    if (filterStyle.value && !studio.terminal_studio_style?.includes(filterStyle.value)) {
      return false
    }
    if (filterType.value && studio.terminal_studio_type !== filterType.value) {
      return false
    }
    return studio.enable && studio.is_shelf
  })
})

const selectStudio = (studio: Studio) => {
  selectedStudio.value = studio
  emit('select', studio)
}

const emit = defineEmits<{
  (e: 'select', studio: Studio): void
}>()
</script>
```

**æ•°æ®å¤„ç†ï¼š**
```typescript
// ä»JSONæ–‡ä»¶ä¸­æå–æœ‰æ•ˆåœºæ™¯
const validStudios = studioData.data.results.filter(
  item => item.enable && item.is_shelf && item.available_ability_type === 'video'
)

// æŒ‰è¯„åˆ†æ’åºï¼ˆæ¨èä¼˜å…ˆï¼‰
const sortedStudios = validStudios.sort((a, b) => b.score - a.score)
```

#### 3.5.2 æ•°å­—äººå½¢è±¡é€‰æ‹©å™¨ (LookSelector.vue)

**æ•°æ®æ¥æºï¼š** `docs/3däººç‰©ä¿¡æ¯.json`

**UIè®¾è®¡ï¼š**
```vue
<template>
  <div class="look-selector">
    <h3>é€‰æ‹©æ•°å­—äººå½¢è±¡</h3>

    <!-- ç­›é€‰ -->
    <div class="filter-bar">
      <el-radio-group v-model="filterGender">
        <el-radio-button label="">å…¨éƒ¨</el-radio-button>
        <el-radio-button label="female">å¥³æ€§</el-radio-button>
        <el-radio-button label="male">ç”·æ€§</el-radio-button>
      </el-radio-group>

      <el-select v-model="filterAge" placeholder="å¹´é¾„æ®µ">
        <el-option label="å…¨éƒ¨" value="" />
        <el-option label="20-40å²" value="20to40" />
        <el-option label="41-50å²" value="41to50" />
        <el-option label="51-60å²" value="51to60" />
      </el-select>
    </div>

    <!-- å½¢è±¡å¡ç‰‡ -->
    <div class="look-grid">
      <div
        v-for="look in filteredLooks"
        :key="look.id"
        :class="['look-card', { active: selectedLook?.id === look.id }]"
        @click="selectLook(look)"
      >
        <el-image :src="look.half_body_preview_image_oss" fit="cover" />
        <div class="look-info">
          <div class="look-name">{{ look.cn_name }}</div>
          <div class="look-meta">
            <el-tag size="small">{{ look.gender === 'female' ? 'å¥³' : 'ç”·' }}</el-tag>
            <el-tag size="small" type="info">{{ getAgeLabel(look.age) }}</el-tag>
          </div>
        </div>
        <!-- è¯•çœ‹è§†é¢‘æŒ‰é’® -->
        <el-button
          v-if="look.facial_animation_video_oss"
          class="preview-btn"
          size="small"
          @click.stop="previewLook(look)"
        >
          é¢„è§ˆ
        </el-button>
      </div>
    </div>
  </div>
</template>

<script setup lang="ts">
import lookData from '@/assets/data/3däººç‰©ä¿¡æ¯.json'

interface Look {
  id: number
  name: string
  cn_name: string
  full_body_preview_image_oss: string
  half_body_preview_image_oss: string
  facial_animation_video_oss: string
  gender: 'male' | 'female'
  age: string
  collection_style: string
  // ...
}

const looks = ref<Look[]>(lookData.data.results)
const selectedLook = ref<Look | null>(null)
const filterGender = ref('')
const filterAge = ref('')

const filteredLooks = computed(() => {
  return looks.value.filter(look => {
    if (filterGender.value && look.gender !== filterGender.value) return false
    if (filterAge.value && look.age !== filterAge.value) return false
    return look.enable && look.is_shelf && look.available_ability_type?.includes('video')
  })
})

const selectLook = (look: Look) => {
  selectedLook.value = look
  emit('select', look)
}
</script>
```

#### 3.5.3 éŸ³è‰²é€‰æ‹©å™¨ (VoiceSelector.vue)

**æ•°æ®æ¥æºï¼š** `docs/3déŸ³è‰²ä¿¡æ¯.json`

**UIè®¾è®¡ï¼š**
```vue
<template>
  <div class="voice-selector">
    <h3>é€‰æ‹©éŸ³è‰²</h3>

    <!-- ç­›é€‰ -->
    <div class="filter-bar">
      <el-radio-group v-model="filterGender">
        <el-radio-button label="">å…¨éƒ¨</el-radio-button>
        <el-radio-button label="female">å¥³å£°</el-radio-button>
        <el-radio-button label="male">ç”·å£°</el-radio-button>
      </el-radio-group>

      <el-select v-model="filterLanguage" placeholder="è¯­è¨€">
        <el-option label="å…¨éƒ¨" value="" />
        <el-option label="ä¸­æ–‡" value="Chinese" />
        <el-option label="è‹±æ–‡" value="English" />
      </el-select>

      <el-select v-model="filterStyle" placeholder="é£æ ¼">
        <el-option label="å…¨éƒ¨" value="" />
        <el-option label="æ¸©å’Œ" value="mild" />
        <el-option label="æ´»åŠ›" value="energetic" />
        <el-option label="å¯çˆ±" value="cute" />
        <!-- ... -->
      </el-select>
    </div>

    <!-- éŸ³è‰²åˆ—è¡¨ -->
    <div class="voice-list">
      <div
        v-for="voice in filteredVoices"
        :key="voice.id"
        :class="['voice-item', { active: selectedVoice?.id === voice.id }]"
        @click="selectVoice(voice)"
      >
        <el-image :src="voice.render_image_oss" class="voice-avatar" />
        <div class="voice-info">
          <div class="voice-name">{{ voice.cn_name }}</div>
          <div class="voice-desc">{{ voice.description }}</div>
          <div class="voice-tags">
            <el-tag size="small">{{ voice.language_tag }}</el-tag>
            <el-tag size="small" type="info">{{ getGenderLabel(voice.gender) }}</el-tag>
            <el-tag size="small" type="success">{{ getStyleLabel(voice.style_label) }}</el-tag>
          </div>
        </div>
        <!-- è¯•å¬æŒ‰é’® -->
        <el-button
          class="audition-btn"
          :icon="Headset"
          circle
          @click.stop="playAudition(voice)"
        >
        </el-button>
      </div>
    </div>

    <!-- éŸ³é¢‘æ’­æ”¾å™¨ -->
    <audio ref="audioPlayer" :src="currentAudioUrl" @ended="onAudioEnded"></audio>
  </div>
</template>

<script setup lang="ts">
import voiceData from '@/assets/data/3déŸ³è‰²ä¿¡æ¯.json'

interface Voice {
  id: number
  tts_vcn_id: string
  cn_name: string
  description: string
  preview_audio_oss: string
  preview_audio_pro_oss: string | null
  render_image_oss: string
  gender: 'male' | 'female'
  language_tag: string
  style_label: string
  age_label: string
  // ...
}

const voices = ref<Voice[]>(voiceData.data.results)
const selectedVoice = ref<Voice | null>(null)
const filterGender = ref('')
const filterLanguage = ref('')
const filterStyle = ref('')
const audioPlayer = ref<HTMLAudioElement>()
const currentAudioUrl = ref('')
const playingVoiceId = ref<number | null>(null)

const filteredVoices = computed(() => {
  return voices.value.filter(voice => {
    if (filterGender.value && voice.gender !== filterGender.value) return false
    if (filterLanguage.value && voice.language_tag !== filterLanguage.value) return false
    if (filterStyle.value && voice.style_label !== filterStyle.value) return false
    return voice.enable && voice.is_shelf
  })
})

const selectVoice = (voice: Voice) => {
  selectedVoice.value = voice
  emit('select', voice)
}

const playAudition = (voice: Voice) => {
  // ä¼˜å…ˆä½¿ç”¨Proç‰ˆè¯•å¬éŸ³é¢‘ï¼Œå¦åˆ™ä½¿ç”¨åŸºç¡€ç‰ˆ
  currentAudioUrl.value = voice.preview_audio_pro_oss || voice.preview_audio_oss
  playingVoiceId.value = voice.id
  nextTick(() => {
    audioPlayer.value?.play()
  })
}

const onAudioEnded = () => {
  playingVoiceId.value = null
}
</script>
```

### 3.6 ä¸»é¡µé¢é€»è¾‘ (index.vue)

#### 3.6.1 æ•°æ®çŠ¶æ€ç®¡ç†

```typescript
// 3Dè¯¾ç¨‹ä¿¡æ¯ï¼ˆç®€åŒ–ç‰ˆï¼‰
const course3DInfo = ref({
  id: 0,
  accountId: userId.value,
  aspect: '16:9',
  name: 'æœªå‘½å3Dè¯¾ç¨‹',
  duration: 0,
  status: 0,
  pageMode: 2,              // pptè¯¾ä»¶è§†é¢‘
  matting: 0,               // 3Dä¸éœ€è¦æŠ å›¾
  width: 1920,
  height: 1080,

  // 3Dä¸“å±é…ç½®
  platformType: 2,          // å›ºå®šä¸º3D
  synthesisType: 'segment', // å›ºå®šä¸ºsegment
  ifAigcMark: 0,            // å›ºå®šä¸º0
  subTitle: 'off'           // é»˜è®¤å…³é—­å­—å¹•
})

// 3Dèµ„æºé€‰æ‹©
const selected3DResources = ref({
  studio: null as Studio | null,      // æ¼”æ’­å®¤åœºæ™¯
  look: null as Look | null,          // æ•°å­—äººå½¢è±¡
  voice: null as Voice | null         // éŸ³è‰²
})

// PPTåœºæ™¯åˆ—è¡¨ï¼ˆç®€åŒ–ç‰ˆï¼Œæ— æ•°å­—äººä½ç½®ä¿¡æ¯ï¼‰
const pptScenes = ref<Array<{
  id: string
  pictureUrl: string          // PPTé¡µé¢å›¾ç‰‡
  pptRemark: string           // å£æ’­ç¨¿
  pageIndex: number           // é¡µç 
  duration: number            // é¢„ä¼°æ—¶é•¿ï¼ˆç§’ï¼‰
}>>([])

// å½“å‰é€‰ä¸­çš„åœºæ™¯
const currentScene = ref<any>(null)
```

#### 3.6.2 æ ¸å¿ƒæ–¹æ³•å®ç°

**1. PPTä¸Šä¼ å¤„ç†ï¼ˆå¤ç”¨2Dé€»è¾‘ï¼‰**

```typescript
const handlePPTUploadSuccess = async (response: any) => {
  // 1. ä¿å­˜PPTä¿¡æ¯
  uploadFileObj.url = response.data
  uploadFileObj.courseId = course3DInfo.value.id

  // 2. åˆ›å»ºPPTè®°å½•
  const res = await pptTemplateApi.createPPT(uploadFileObj)
  const pptId = res.data

  // 3. è½®è¯¢è§£æè¿›åº¦
  startPollingPPTProgress(pptId)
}

const startPollingPPTProgress = (pptId: number) => {
  const timer = setInterval(async () => {
    const res = await pptTemplateApi.getSchedule(pptId)
    const progress = res.data

    if (progress.status === 2) { // è§£æå®Œæˆ
      clearInterval(timer)
      loadPPTScenes(pptId)
    } else if (progress.status === 3) { // è§£æå¤±è´¥
      clearInterval(timer)
      message.error('PPTè§£æå¤±è´¥')
    } else {
      // æ›´æ–°è¿›åº¦
      percentagePPT.value = progress.progress
    }
  }, 2000)
}

const loadPPTScenes = (pptId: number) => {
  // ä»åç«¯è·å–è§£æåçš„PPTé¡µé¢æ•°æ®
  // æ„å»ºpptScenesæ•°ç»„
  pptScenes.value = parsedData.map((page, index) => ({
    id: generateUUID(),
    pictureUrl: page.imageUrl,
    pptRemark: page.notes || '',  // è§£æçš„å¤‡æ³¨
    pageIndex: index + 1,
    duration: estimateDuration(page.notes)
  }))

  // é»˜è®¤é€‰ä¸­ç¬¬ä¸€é¡µ
  if (pptScenes.value.length > 0) {
    currentScene.value = pptScenes.value[0]
  }
}
```

**2. ä¿å­˜ä¸åˆæˆè§†é¢‘**

```typescript
const saveAndCompose3DVideo = async () => {
  // 1. å‚æ•°æ ¡éªŒ
  if (!selected3DResources.value.studio) {
    message.warning('è¯·é€‰æ‹©æ¼”æ’­å®¤åœºæ™¯')
    return
  }
  if (!selected3DResources.value.look) {
    message.warning('è¯·é€‰æ‹©æ•°å­—äººå½¢è±¡')
    return
  }
  if (!selected3DResources.value.voice) {
    message.warning('è¯·é€‰æ‹©éŸ³è‰²')
    return
  }
  if (!pptScenes.value || pptScenes.value.length === 0) {
    message.warning('è¯·å…ˆä¸Šä¼ PPT')
    return
  }

  // 2. æ ¡éªŒæ¯ä¸ªåœºæ™¯çš„æ–‡æœ¬
  for (const scene of pptScenes.value) {
    if (!scene.pptRemark || scene.pptRemark.trim() === '') {
      message.warning(`ç¬¬${scene.pageIndex}é¡µçš„å£æ’­ç¨¿ä¸èƒ½ä¸ºç©º`)
      return
    }
  }

  // 3. æ‹¼æ¥æ‰€æœ‰åœºæ™¯çš„æ–‡æœ¬
  const allText = pptScenes.value
    .map(scene => scene.pptRemark)
    .join('\n\n')  // åœºæ™¯ä¹‹é—´ç”¨åŒæ¢è¡Œåˆ†éš”

  // 4. ç»„è£…åˆæˆè¯·æ±‚å‚æ•°
  const composeData: CourseMedia3DMegerVO = {
    // åŸºç¡€ä¿¡æ¯
    id: course3DInfo.value.id,
    courseMediaId: course3DInfo.value.id,
    accountId: course3DInfo.value.accountId,
    name: course3DInfo.value.name,
    aspect: course3DInfo.value.aspect,
    duration: calculateTotalDuration(),
    height: course3DInfo.value.height,
    width: course3DInfo.value.width,
    pageMode: course3DInfo.value.pageMode,

    // 3Då›ºå®šå‚æ•°
    platformType: 2,
    synthesisType: 'segment',
    ifAigcMark: 0,
    subTitle: course3DInfo.value.subTitle,

    // 3Dèµ„æºé…ç½®
    studioName: selected3DResources.value.studio.studio_en_name,
    lookName: selected3DResources.value.look.name,
    ttsVcnName: selected3DResources.value.voice.tts_vcn_id,

    // æ–‡æœ¬å†…å®¹
    text: allText,

    // åœºæ™¯æ•°æ®ï¼ˆç”¨äºä¿å­˜ï¼Œéåˆæˆå¿…éœ€ï¼‰
    scenes: pptScenes.value.map(scene => ({
      pageIndex: scene.pageIndex,
      pptRemark: scene.pptRemark,
      pictureUrl: scene.pictureUrl
    })),

    // PPTæ–‡ä»¶URLï¼ˆå¦‚æœåç«¯éœ€è¦ï¼‰
    pptFileUrl: uploadFileObj.url,

    // ç¼©ç•¥å›¾ï¼ˆä½¿ç”¨ç¬¬ä¸€é¡µï¼‰
    thumbnail: pptScenes.value[0]?.pictureUrl || '',

    // é¡µé¢ä¿¡æ¯
    pageInfo: JSON.stringify({
      studio: selected3DResources.value.studio,
      look: selected3DResources.value.look,
      voice: selected3DResources.value.voice,
      totalPages: pptScenes.value.length
    })
  }

  // 5. å…ˆä¿å­˜è¯¾ç¨‹
  await pptTemplateApi.coursesSave(composeData)

  // 6. æäº¤åˆæˆä»»åŠ¡
  const res = await pptTemplateApi.megerMedia(composeData)
  if (res) {
    message.success('3Dè§†é¢‘åˆæˆä»»åŠ¡å·²æäº¤ï¼Œè¯·åˆ°"æˆ‘çš„è§†é¢‘"ä¸­æŸ¥çœ‹ï¼')
    // å¯é€‰ï¼šè·³è½¬åˆ°"æˆ‘çš„è§†é¢‘"é¡µé¢
    router.push('/myCourse')
  }
}

// è®¡ç®—æ€»æ—¶é•¿ï¼ˆæ ¹æ®æ–‡æœ¬å­—æ•°ä¼°ç®—ï¼‰
const calculateTotalDuration = () => {
  return pptScenes.value.reduce((total, scene) => {
    // å‡è®¾æ¯åˆ†é’Ÿ200å­—
    const duration = (scene.pptRemark.length / 200) * 60
    return total + duration
  }, 0)
}
```

**3. åœºæ™¯ç¼–è¾‘**

```typescript
// åˆ‡æ¢åœºæ™¯
const selectScene = (scene: any) => {
  currentScene.value = scene
}

// æ›´æ–°å£æ’­ç¨¿
const updateScriptContent = (content: string) => {
  if (currentScene.value) {
    currentScene.value.pptRemark = content
    currentScene.value.duration = estimateDuration(content)
  }
}

// å¤åˆ¶åœºæ™¯
const copyScene = (scene: any) => {
  const newScene = {
    ...cloneDeep(scene),
    id: generateUUID(),
    pageIndex: pptScenes.value.length + 1
  }
  pptScenes.value.push(newScene)
}

// åˆ é™¤åœºæ™¯
const deleteScene = (scene: any) => {
  const index = pptScenes.value.findIndex(s => s.id === scene.id)
  if (index > -1) {
    pptScenes.value.splice(index, 1)
    // é‡æ–°è®¡ç®—é¡µç 
    pptScenes.value.forEach((s, i) => {
      s.pageIndex = i + 1
    })
    // é€‰ä¸­ç¬¬ä¸€é¡µ
    if (pptScenes.value.length > 0) {
      currentScene.value = pptScenes.value[0]
    }
  }
}
```

### 3.7 è·¯ç”±é…ç½®

**æ–‡ä»¶ä½ç½®ï¼š** `src/router/modules/remaining.ts` æˆ–ç‹¬ç«‹è·¯ç”±æ–‡ä»¶

```typescript
{
  path: '/choose3DTemplate',
  name: 'Choose3DTemplate',
  component: () => import('@/views/choose3DTemplate/index.vue'),
  meta: {
    title: '3Dæ•°å­—äººè¯¾ç¨‹åˆ¶ä½œ',
    noCache: true,
    hidden: true
  }
}
```

### 3.8 å›½é™…åŒ–é…ç½®

**æ–‡ä»¶ä½ç½®ï¼š** `src/locales/zh-CN.ts`

```typescript
export default {
  choose3DTemplate: {
    title: '3Dæ•°å­—äººè¯¾ç¨‹åˆ¶ä½œ',
    selectStudio: 'é€‰æ‹©æ¼”æ’­å®¤åœºæ™¯',
    selectLook: 'é€‰æ‹©æ•°å­—äººå½¢è±¡',
    selectVoice: 'é€‰æ‹©éŸ³è‰²',
    studioPreview: 'åœºæ™¯é¢„è§ˆ',
    lookPreview: 'å½¢è±¡é¢„è§ˆ',
    voiceAudition: 'è¯•å¬',
    scriptEditor: 'å£æ’­ç¨¿ç¼–è¾‘',
    estimatedDuration: 'é¢„è®¡æ—¶é•¿',
    wordCount: 'å­—æ•°',
    composeVideo: 'åˆæˆ3Dè§†é¢‘',
    save: 'ä¿å­˜',

    // ç­›é€‰é€‰é¡¹
    filterGender: 'æ€§åˆ«',
    filterAge: 'å¹´é¾„æ®µ',
    filterLanguage: 'è¯­è¨€',
    filterStyle: 'é£æ ¼',
    filterStudioType: 'åœºæ™¯ç±»å‹',

    // æç¤ºä¿¡æ¯
    pleaseSelectStudio: 'è¯·é€‰æ‹©æ¼”æ’­å®¤åœºæ™¯',
    pleaseSelectLook: 'è¯·é€‰æ‹©æ•°å­—äººå½¢è±¡',
    pleaseSelectVoice: 'è¯·é€‰æ‹©éŸ³è‰²',
    pleaseUploadPPT: 'è¯·å…ˆä¸Šä¼ PPT',
    scriptCannotBeEmpty: 'å£æ’­ç¨¿ä¸èƒ½ä¸ºç©º',
    composeSuccess: '3Dè§†é¢‘åˆæˆä»»åŠ¡å·²æäº¤'
  }
}
```

---

## å››ã€æŠ€æœ¯æ–¹æ¡ˆç»†èŠ‚

### 4.1 é™æ€èµ„æºç®¡ç†

**æ–¹æ¡ˆä¸€ï¼šJSONæ–‡ä»¶ç›´æ¥å¯¼å…¥**
```typescript
// å°†docsä¸‹çš„JSONæ–‡ä»¶å¤åˆ¶åˆ°src/assets/data/
import studioData from '@/assets/data/3dåœºæ™¯ä¿¡æ¯.json'
import lookData from '@/assets/data/3däººç‰©ä¿¡æ¯.json'
import voiceData from '@/assets/data/3déŸ³è‰²ä¿¡æ¯.json'
```

**ä¼˜ç‚¹ï¼š** ç®€å•ç›´æ¥ï¼Œä¸éœ€è¦é¢å¤–è¯·æ±‚
**ç¼ºç‚¹ï¼š** æ•°æ®æ›´æ–°éœ€è¦é‡æ–°å‘å¸ƒ

**æ–¹æ¡ˆäºŒï¼šAPIæ¥å£è·å–**ï¼ˆæ¨èï¼‰
```typescript
// å¦‚æœåç«¯æä¾›äº†3Dèµ„æºæ¥å£
export const get3DStudios = async() => {
  return await request.get({ url: '/digitalcourse/3d-studios/list' })
}

export const get3DLooks = async() => {
  return await request.get({ url: '/digitalcourse/3d-looks/list' })
}

export const get3DVoices = async() => {
  return await request.get({ url: '/digitalcourse/3d-voices/list' })
}
```

**ä¼˜ç‚¹ï¼š** æ•°æ®åŠ¨æ€æ›´æ–°ï¼Œæ˜“äºç»´æŠ¤
**ç¼ºç‚¹ï¼š** éœ€è¦åç«¯æ”¯æŒ

**å»ºè®®ï¼š** åˆæœŸä½¿ç”¨æ–¹æ¡ˆä¸€å¿«é€Ÿå®ç°ï¼ŒåæœŸè¿ç§»åˆ°æ–¹æ¡ˆäºŒ

### 4.2 ç±»å‹å®šä¹‰

**æ–‡ä»¶ä½ç½®ï¼š** `src/views/choose3DTemplate/types.ts`

```typescript
// æ¼”æ’­å®¤åœºæ™¯
export interface Studio3D {
  id: number
  studio_en_name: string
  studio_chinese_name: string
  render_image_oss: string
  render_movie_oss: string
  studio_type: string
  terminal_studio_style: string
  terminal_studio_type: string
  camera_config_chinese_name: string
  theme_color_tag: string
  score: number
  enable: boolean
  is_shelf: boolean
  available_ability_type: string
}

// æ•°å­—äººå½¢è±¡
export interface Look3D {
  id: number
  name: string
  cn_name: string
  full_body_preview_image_oss: string
  half_body_preview_image_oss: string
  facial_animation_video_oss: string
  gender: 'male' | 'female'
  age: string
  race: string
  collection_style: string
  collection_series: string
  terminal_color: string
  score: number
  enable: boolean
  is_shelf: boolean
  available_ability_type: string
}

// éŸ³è‰²
export interface Voice3D {
  id: number
  tts_vcn_id: string
  cn_name: string
  description: string
  preview_audio_oss: string
  preview_audio_pro_oss: string | null
  render_image_oss: string
  gender: 'male' | 'female'
  language_tag: string
  age_label: string
  style_label: string
  tts_model: string
  sample_text: string
  score: number
  enable: boolean
  is_shelf: boolean
}

// 3Dè¯¾ç¨‹åœºæ™¯
export interface Scene3D {
  id: string
  pictureUrl: string
  pptRemark: string
  pageIndex: number
  duration: number
}

// 3Dè¯¾ç¨‹ä¿¡æ¯
export interface Course3DInfo {
  id: number
  accountId: number
  aspect: string
  name: string
  duration: number
  status: number
  pageMode: number
  matting: number
  width: number
  height: number
  platformType: 2
  synthesisType: 'segment'
  ifAigcMark: 0
  subTitle: 'on' | 'off'
}
```

### 4.3 æ ·å¼è§„èŒƒ

**é¢œè‰²æ–¹æ¡ˆï¼š**
```scss
// 3Dä¸»é¢˜è‰²ï¼ˆåŒºåˆ«äº2Dï¼‰
$primary-3d: #7C3AED;        // ç´«è‰²ä¸»é¢˜
$primary-3d-light: #A78BFA;
$primary-3d-dark: #5B21B6;

// å¡ç‰‡æ ·å¼
.studio-card, .look-card, .voice-item {
  border: 2px solid transparent;
  transition: all 0.3s;

  &:hover {
    border-color: $primary-3d-light;
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(124, 58, 237, 0.15);
  }

  &.active {
    border-color: $primary-3d;
    box-shadow: 0 0 0 3px rgba(124, 58, 237, 0.1);
  }
}
```

### 4.4 æ€§èƒ½ä¼˜åŒ–

**1. å›¾ç‰‡æ‡’åŠ è½½**
```vue
<el-image :src="studio.render_image_oss" fit="cover" lazy />
```

**2. è™šæ‹Ÿåˆ—è¡¨ï¼ˆå¦‚æœæ•°æ®é‡å¤§ï¼‰**
```bash
pnpm install vue-virtual-scroller
```

```vue
<RecycleScroller
  :items="filteredStudios"
  :item-size="200"
  key-field="id"
>
  <template #default="{ item }">
    <StudioCard :studio="item" />
  </template>
</RecycleScroller>
```

**3. éŸ³é¢‘é¢„åŠ è½½**
```typescript
// é¢„åŠ è½½å‰3ä¸ªéŸ³è‰²çš„è¯•å¬éŸ³é¢‘
const preloadAudios = () => {
  filteredVoices.value.slice(0, 3).forEach(voice => {
    const audio = new Audio()
    audio.src = voice.preview_audio_oss
    audio.preload = 'auto'
  })
}
```

### 4.5 é”™è¯¯å¤„ç†

```typescript
// APIè°ƒç”¨ç»Ÿä¸€é”™è¯¯å¤„ç†
const safeApiCall = async (apiFunc: Function, errorMsg: string) => {
  try {
    return await apiFunc()
  } catch (error) {
    console.error(errorMsg, error)
    message.error(errorMsg)
    return null
  }
}

// ä½¿ç”¨ç¤ºä¾‹
const compose3DVideo = async () => {
  const result = await safeApiCall(
    () => pptTemplateApi.megerMedia(composeData),
    'åˆæˆè§†é¢‘å¤±è´¥ï¼Œè¯·é‡è¯•'
  )

  if (result) {
    message.success('åˆæˆä»»åŠ¡å·²æäº¤')
  }
}
```

---

## äº”ã€å¼€å‘è®¡åˆ’

### 5.1 å¼€å‘é˜¶æ®µåˆ’åˆ†

#### é˜¶æ®µä¸€ï¼šåŸºç¡€æ¡†æ¶æ­å»ºï¼ˆ1-2å¤©ï¼‰
- [x] åˆ›å»ºç›®å½•ç»“æ„
- [x] é…ç½®è·¯ç”±
- [x] æ­å»ºä¸»é¡µé¢å¸ƒå±€
- [x] å¯¼å…¥3Dèµ„æºJSONæ–‡ä»¶
- [x] å®šä¹‰TypeScriptç±»å‹

#### é˜¶æ®µäºŒï¼šç»„ä»¶å¼€å‘ï¼ˆ2-3å¤©ï¼‰
- [x] å¼€å‘ StudioSelector ç»„ä»¶
- [x] å¼€å‘ LookSelector ç»„ä»¶
- [x] å¼€å‘ VoiceSelector ç»„ä»¶
- [x] å¼€å‘/å¤ç”¨ ScriptEditor ç»„ä»¶
- [x] å®ç°PPTåˆ—è¡¨ç»„ä»¶

#### é˜¶æ®µä¸‰ï¼šåŠŸèƒ½é›†æˆï¼ˆ2-3å¤©ï¼‰
- [x] PPTä¸Šä¼ ä¸è§£æ
- [x] åœºæ™¯ç®¡ç†ï¼ˆå¢åˆ æ”¹æŸ¥ï¼‰
- [x] 3Dèµ„æºé€‰æ‹©äº¤äº’
- [x] æ•°æ®ä¿å­˜é€»è¾‘
- [x] è§†é¢‘åˆæˆè°ƒç”¨

#### é˜¶æ®µå››ï¼šä¼˜åŒ–ä¸æµ‹è¯•ï¼ˆ1-2å¤©ï¼‰
- [x] æ€§èƒ½ä¼˜åŒ–
- [x] äº¤äº’ä¼˜åŒ–
- [x] é”™è¯¯å¤„ç†å®Œå–„
- [x] ç«¯åˆ°ç«¯æµ‹è¯•
- [x] å…¼å®¹æ€§æµ‹è¯•

**é¢„è®¡æ€»å·¥æœŸï¼š6-10å¤©**

### 5.2 æµ‹è¯•ç”¨ä¾‹

#### 5.2.1 åŠŸèƒ½æµ‹è¯•

| æµ‹è¯•é¡¹ | æµ‹è¯•æ­¥éª¤ | é¢„æœŸç»“æœ |
|--------|---------|---------|
| PPTä¸Šä¼  | ä¸Šä¼ .pptxæ–‡ä»¶ | æ˜¾ç¤ºè§£æè¿›åº¦ï¼Œå®Œæˆåå±•ç¤ºåœºæ™¯åˆ—è¡¨ |
| åœºæ™¯ç¼–è¾‘ | ä¿®æ”¹å£æ’­ç¨¿ | å®æ—¶æ›´æ–°å­—æ•°å’Œé¢„è®¡æ—¶é•¿ |
| èµ„æºé€‰æ‹© | ä¾æ¬¡é€‰æ‹©åœºæ™¯ã€å½¢è±¡ã€éŸ³è‰² | æ˜¾ç¤ºå·²é€‰çŠ¶æ€ï¼Œæ”¯æŒåˆ‡æ¢ |
| éŸ³è‰²è¯•å¬ | ç‚¹å‡»è¯•å¬æŒ‰é’® | æ’­æ”¾éŸ³é¢‘ï¼Œæ”¯æŒæš‚åœ |
| åœºæ™¯å¤åˆ¶ | å¤åˆ¶æŸä¸ªåœºæ™¯ | ç”Ÿæˆæ–°åœºæ™¯ï¼Œé¡µç è‡ªåŠ¨æ›´æ–° |
| åœºæ™¯åˆ é™¤ | åˆ é™¤æŸä¸ªåœºæ™¯ | åœºæ™¯ç§»é™¤ï¼Œé¡µç é‡æ–°æ’åº |
| ä¿å­˜è¯¾ç¨‹ | ç‚¹å‡»ä¿å­˜æŒ‰é’® | æç¤ºä¿å­˜æˆåŠŸï¼Œè®°å½•ä¿å­˜æ—¶é—´ |
| åˆæˆè§†é¢‘ | ç‚¹å‡»åˆæˆæŒ‰é’® | æ ¡éªŒé€šè¿‡åæäº¤ä»»åŠ¡ï¼Œæç¤ºæˆåŠŸ |

#### 5.2.2 å¼‚å¸¸æµ‹è¯•

| æµ‹è¯•é¡¹ | è§¦å‘æ¡ä»¶ | é¢„æœŸå¤„ç† |
|--------|---------|---------|
| æœªé€‰åœºæ™¯åˆæˆ | æœªé€‰æ‹©æ¼”æ’­å®¤åœºæ™¯ | æç¤º"è¯·é€‰æ‹©æ¼”æ’­å®¤åœºæ™¯" |
| æœªé€‰å½¢è±¡åˆæˆ | æœªé€‰æ‹©æ•°å­—äººå½¢è±¡ | æç¤º"è¯·é€‰æ‹©æ•°å­—äººå½¢è±¡" |
| æœªé€‰éŸ³è‰²åˆæˆ | æœªé€‰æ‹©éŸ³è‰² | æç¤º"è¯·é€‰æ‹©éŸ³è‰²" |
| ç©ºå£æ’­ç¨¿åˆæˆ | æŸé¡µå£æ’­ç¨¿ä¸ºç©º | æç¤º"ç¬¬Xé¡µçš„å£æ’­ç¨¿ä¸èƒ½ä¸ºç©º" |
| PPTè§£æå¤±è´¥ | ä¸Šä¼ æŸåçš„PPT | æç¤º"PPTè§£æå¤±è´¥" |
| ç½‘ç»œé”™è¯¯ | æ¥å£è°ƒç”¨å¤±è´¥ | æç¤ºå…·ä½“é”™è¯¯ä¿¡æ¯ï¼Œä¸å½±å“å·²ç¼–è¾‘å†…å®¹ |

---

## å…­ã€ä¸Šçº¿å‡†å¤‡

### 6.1 éƒ¨ç½²æ£€æŸ¥æ¸…å•

- [ ] ç¯å¢ƒå˜é‡é…ç½®ï¼ˆAPIåœ°å€ã€è¶…æ—¶æ—¶é—´ï¼‰
- [ ] é™æ€èµ„æºCDNé…ç½®
- [ ] è·¯ç”±æƒé™é…ç½®
- [ ] å›½é™…åŒ–æ–‡æœ¬å®Œæ•´æ€§æ£€æŸ¥
- [ ] ç”Ÿäº§ç¯å¢ƒAPIæµ‹è¯•
- [ ] æ€§èƒ½åŸºå‡†æµ‹è¯•
- [ ] æµè§ˆå™¨å…¼å®¹æ€§æµ‹è¯•ï¼ˆChromeã€Firefoxã€Safariã€Edgeï¼‰
- [ ] ç§»åŠ¨ç«¯é€‚é…æ£€æŸ¥

### 6.2 æ–‡æ¡£äº¤ä»˜

- [ ] ç”¨æˆ·ä½¿ç”¨æ‰‹å†Œ
- [ ] APIå¯¹æ¥æ–‡æ¡£
- [ ] ç»„ä»¶ä½¿ç”¨æ–‡æ¡£
- [ ] å¸¸è§é—®é¢˜FAQ
- [ ] è¿ç»´æ‰‹å†Œ

### 6.3 ç›‘æ§ä¸åé¦ˆ

**åŸ‹ç‚¹æ–¹æ¡ˆï¼š**
```typescript
// å…³é”®æ“ä½œåŸ‹ç‚¹
const trackEvent = (eventName: string, params?: any) => {
  // æ¥å…¥æ•°æ®åˆ†æå¹³å°ï¼ˆå¦‚ç™¾åº¦ç»Ÿè®¡ã€ç¥ç­–ç­‰ï¼‰
  console.log('[Track]', eventName, params)
}

// ä½¿ç”¨ç¤ºä¾‹
trackEvent('3d_video_compose', {
  studio: selected3DResources.value.studio?.studio_en_name,
  look: selected3DResources.value.look?.name,
  voice: selected3DResources.value.voice?.tts_vcn_id,
  pptPages: pptScenes.value.length,
  totalDuration: calculateTotalDuration()
})
```

**ç›‘æ§æŒ‡æ ‡ï¼š**
- é¡µé¢åŠ è½½æ—¶é—´
- PPTè§£æè€—æ—¶
- è§†é¢‘åˆæˆæˆåŠŸç‡
- ç”¨æˆ·åœç•™æ—¶é•¿
- èµ„æºé€‰æ‹©åˆ†å¸ƒï¼ˆæœ€å—æ¬¢è¿çš„åœºæ™¯/å½¢è±¡/éŸ³è‰²ï¼‰

---

## ä¸ƒã€åç»­ä¼˜åŒ–æ–¹å‘

### 7.1 çŸ­æœŸä¼˜åŒ–ï¼ˆ1-2ä¸ªæœˆï¼‰
1. **æ™ºèƒ½æ¨è**ï¼šæ ¹æ®ç”¨æˆ·å†å²é€‰æ‹©æ¨èåœºæ™¯/å½¢è±¡/éŸ³è‰²ç»„åˆ
2. **æ‰¹é‡æ“ä½œ**ï¼šæ”¯æŒæ‰¹é‡ç¼–è¾‘å£æ’­ç¨¿ã€æ‰¹é‡åº”ç”¨è®¾ç½®
3. **é¢„è§ˆåŠŸèƒ½**ï¼šåˆæˆå‰é¢„è§ˆå•ä¸ªåœºæ™¯æ•ˆæœ
4. **æ¨¡æ¿ä¿å­˜**ï¼šä¿å­˜å¸¸ç”¨çš„3Dé…ç½®ä¸ºæ¨¡æ¿

### 7.2 ä¸­æœŸä¼˜åŒ–ï¼ˆ3-6ä¸ªæœˆï¼‰
1. **AIåŠ©æ‰‹**ï¼šå£æ’­ç¨¿æ™ºèƒ½æ¶¦è‰²ã€è¯­é€Ÿä¼˜åŒ–å»ºè®®
2. **ååŒç¼–è¾‘**ï¼šæ”¯æŒå¤šäººåŒæ—¶ç¼–è¾‘åŒä¸€è¯¾ç¨‹
3. **ç‰ˆæœ¬ç®¡ç†**ï¼šè¯¾ç¨‹ç¼–è¾‘å†å²è®°å½•ä¸å›æ»š
4. **ç´ æåº“**ï¼šç”¨æˆ·è‡ªå®šä¹‰ä¸Šä¼ èƒŒæ™¯éŸ³ä¹ã€å­—å¹•æ ·å¼

### 7.3 é•¿æœŸè§„åˆ’ï¼ˆ6ä¸ªæœˆä»¥ä¸Šï¼‰
1. **å®æ—¶é¢„è§ˆ**ï¼šå‰ç«¯å®æ—¶æ¸²æŸ“3Dæ•°å­—äººæ•ˆæœ
2. **æ··å‰ªåŠŸèƒ½**ï¼š2D/3Dæ•°å­—äººæ··åˆä½¿ç”¨
3. **é«˜çº§ç¼–è¾‘å™¨**ï¼šæ—¶é—´è½´ç¼–è¾‘ã€å…³é”®å¸§åŠ¨ç”»
4. **AIæ•°å­—äººå®šåˆ¶**ï¼šç”¨æˆ·ä¸Šä¼ ç…§ç‰‡ç”Ÿæˆä¸“å±3Dæ•°å­—äºº

---

## å…«ã€é£é™©è¯„ä¼°ä¸åº”å¯¹

### 8.1 æŠ€æœ¯é£é™©

| é£é™©é¡¹ | å½±å“ | æ¦‚ç‡ | åº”å¯¹ç­–ç•¥ |
|--------|------|------|---------|
| 3Dèµ„æºæ•°æ®ç»“æ„å˜åŒ– | é«˜ | ä¸­ | å®šä¹‰é€‚é…å±‚ï¼Œéš”ç¦»æ•°æ®æºå˜åŒ– |
| åç«¯æ¥å£ä¸ç¨³å®š | é«˜ | ä½ | å¢åŠ é‡è¯•æœºåˆ¶ã€è¶…æ—¶å¤„ç† |
| å‰ç«¯æ€§èƒ½é—®é¢˜ | ä¸­ | ä¸­ | è™šæ‹Ÿåˆ—è¡¨ã€å›¾ç‰‡æ‡’åŠ è½½ã€åˆ†é¡µåŠ è½½ |
| æµè§ˆå™¨å…¼å®¹æ€§ | ä¸­ | ä½ | Polyfillã€é™çº§æ–¹æ¡ˆ |

### 8.2 ä¸šåŠ¡é£é™©

| é£é™©é¡¹ | å½±å“ | æ¦‚ç‡ | åº”å¯¹ç­–ç•¥ |
|--------|------|------|---------|
| 3Dåˆæˆå¤±è´¥ç‡é«˜ | é«˜ | ä¸­ | å¢å¼ºå‚æ•°æ ¡éªŒã€æä¾›è¯¦ç»†é”™è¯¯ä¿¡æ¯ |
| ç”¨æˆ·å­¦ä¹ æˆæœ¬é«˜ | ä¸­ | ä¸­ | æ–°æ‰‹å¼•å¯¼ã€æ“ä½œæç¤ºã€å¸®åŠ©æ–‡æ¡£ |
| åŠŸèƒ½ç†è§£åå·® | ä¸­ | ä½ | äº§å“æ¼”ç¤ºã€å†…éƒ¨åŸ¹è®­ã€ç”¨æˆ·è°ƒç ” |

---

## ä¹ã€æ€»ç»“

æœ¬æ–¹æ¡ˆåŸºäºç°æœ‰2Dæ•°å­—äººè¯¾ç¨‹åˆ¶ä½œé¡µé¢çš„æˆåŠŸç»éªŒï¼Œé’ˆå¯¹3Dæ•°å­—äººçš„ç‰¹ç‚¹è¿›è¡Œäº†åˆç†ç®€åŒ–å’Œä¼˜åŒ–ï¼š

**æ ¸å¿ƒæ”¹è¿›ç‚¹ï¼š**
1. âœ… **ç®€åŒ–äº¤äº’**ï¼šå»é™¤å¤æ‚çš„æ¨¡æ¿é…ç½®å’Œä½ç½®è°ƒæ•´ï¼Œé™ä½å­¦ä¹ æˆæœ¬
2. âœ… **æ–°å¢åœºæ™¯é€‰æ‹©**ï¼šæä¾›ä¸°å¯Œçš„æ¼”æ’­å®¤åœºæ™¯åº“ï¼Œå¢å¼ºè§†é¢‘ä¸“ä¸šæ€§
3. âœ… **ä¿æŒä¸€è‡´æ€§**ï¼šæ²¿ç”¨2Dé¡µé¢çš„PPTä¸Šä¼ ã€å£æ’­ç¨¿ç¼–è¾‘æµç¨‹ï¼Œé™ä½è¿ç§»æˆæœ¬
4. âœ… **å›ºå®šå‚æ•°**ï¼šé¢„è®¾åˆç†é»˜è®¤å€¼ï¼Œå‡å°‘ç”¨æˆ·å†³ç­–è´Ÿæ‹…
5. âœ… **æ¸…æ™°åˆ†å·¥**ï¼š3Dé¡µé¢ä¸“æ³¨äº3Dåˆæˆï¼Œ2Dé¡µé¢ä¿æŒç‹¬ç«‹ï¼Œäº’ä¸å¹²æ‰°

**æŠ€æœ¯äº®ç‚¹ï¼š**
- ç»„ä»¶åŒ–è®¾è®¡ï¼Œæ˜“äºç»´æŠ¤å’Œæ‰©å±•
- TypeScriptç±»å‹çº¦æŸï¼Œæé«˜ä»£ç è´¨é‡
- æ€§èƒ½ä¼˜åŒ–ç­–ç•¥ï¼Œä¿è¯æµç•…ä½“éªŒ
- å®Œå–„çš„é”™è¯¯å¤„ç†å’Œç”¨æˆ·æç¤º

**åç»­è¿­ä»£ï¼š**
- å¯æ ¹æ®ç”¨æˆ·åé¦ˆé€æ­¥å¢åŠ é«˜çº§åŠŸèƒ½
- é¢„ç•™æ‰©å±•æ¥å£ï¼Œæ”¯æŒæœªæ¥çš„AIèƒ½åŠ›æ¥å…¥
- å»ºç«‹æ•°æ®åˆ†æä½“ç³»ï¼ŒæŒ‡å¯¼äº§å“ä¼˜åŒ–æ–¹å‘

æœ¬æ–¹æ¡ˆé¢„è®¡å¼€å‘å‘¨æœŸ6-10å¤©ï¼Œå¯å¿«é€Ÿä¸Šçº¿éªŒè¯ï¼Œåç»­æ ¹æ®æ•°æ®åé¦ˆæŒç»­ä¼˜åŒ–ã€‚
